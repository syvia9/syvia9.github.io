## stop LLDP service in device, or there too much lldp packet disturbing our debug

https://wwwin-github.cisco.com/crdc-cag-internal/SONiC/wiki/Debug-LLDP  

#### ------------log-----------------------

cisco@sonic7006:$ sudo mv /usr/lib/systemd/system/lldp.service /usr/lib/systemd/system/lldp.service.bak  

cisco@sonic7006:$ ls -l   /usr/lib/systemd/system/lldp.service*  
xxxx 1 root root 436 Jul 31 04:45 /usr/lib/systemd/system/lldp.service.bak  

cisco@sonic7006:$ sudo reboot  
requested COLD shutdown  
/var/log: 196.1 MiB (205615104 bytes) trimmed  
/boot: 1.4 GiB (1532063744 bytes) trimmed  



## copmplete l3snake config

## debug NPE macro
### send one ping from Ethernet2 to IXIA
cisco@sonic7006:~$ ping -I Vrf203 20.0.0.100 -c 1
ping: Warning: source address might be selected on device other than Vrf203.  
PING 20.0.0.100 (20.0.0.100) from 20.0.0.10 Vrf203: 56(84) bytes of data.  
64 bytes from 20.0.0.100: icmp_seq=1 ttl=64 time=1.60 ms  
  
--- 20.0.0.100 ping statistics ---  
1 packets transmitted, 1 received, 0% packet loss, time 0ms  
rtt min/avg/max/mdev = 1.603/1.603/1.603/0.000 ms  

>>> npu_sc.print_npe_counters_table()
>>>+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|          |s0-in|s0-out|s0-loop|s1-in|s1-out|s1-loop|s2-in|s2-out|s2-loop|s3-in|s3-out|s3-loop|s4-in|s4-out|s4-loop|s5-in|s5-out|s5-loop|
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| NPU-Host |  0  |  0   |   0   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-0|  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-1|  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  1  |  1   |   1   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-2|  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-0 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-1 |  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  1  |  1   |   4   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-2 |  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| Tx-NPE-0 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| Tx-NPE-1 |  2  |  2   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  1  |  1   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
>>>


### stop and step NPE
form the counter above, it seems NPE1/slice4 is involved , maybe NPE2 next time, let us stop slice4/NPE0   
>>> slice =4  
>>>stage = "termination"  
>>>npu_sc.npe_stop_and_step_macro(enable=True, step=False, slice=slice, stage=stage, npe_index=0, print_note=True)  
>>>0  
Slice[4].Stage['termination'].NPE[0] -> Enable Stop macro feature  

>>>npu_sc.npe_stop_and_step_macro(enable=True, step=False, slice=slice, stage=stage, npe_index=0, print_note=True)

### clear counter

>>>
>>>npu_sc.print_npe_counters_table()
>>>+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|          |s0-in|s0-out|s0-loop|s1-in|s1-out|s1-loop|s2-in|s2-out|s2-loop|s3-in|s3-out|s3-loop|s4-in|s4-out|s4-loop|s5-in|s5-out|s5-loop|
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| NPU-Host |  0  |  0   |   0   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-0|  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-1|  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-2|  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-0 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-1 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-2 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| Tx-NPE-0 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| Tx-NPE-1 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+

### send ping 
cisco@sonic7006:~$ ping -I Vrf203 20.0.0.100 -c 1
ping: Warning: source address might be selected on device other than Vrf203.  
PING 20.0.0.100 (20.0.0.100) from 20.0.0.10 Vrf203: 56(84) bytes of data.  
64 bytes from 20.0.0.100: icmp_seq=1 ttl=64 time=1.17 ms  
  
--- 20.0.0.100 ping statistics ---  
1 packets transmitted, 1 received, 0% packet loss, time 0ms  
rtt min/avg/max/mdev = 1.170/1.170/1.170/0.000 ms  

### show counter
>>> npu_sc.print_npe_counters_table()
>>>+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|          |s0-in|s0-out|s0-loop|s1-in|s1-out|s1-loop|s2-in|s2-out|s2-loop|s3-in|s3-out|s3-loop|s4-in|s4-out|s4-loop|s5-in|s5-out|s5-loop|
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| NPU-Host |  0  |  0   |   0   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-0|  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-1|  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-2|  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  1  |  1   |   1   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-0 |  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-1 |  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-2 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  1  |  1   |   4   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| Tx-NPE-0 |  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| Tx-NPE-1 |  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  1  |  1   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
 
### let us stop NPE 2 as well as 0

>>>npu_sc.npe_stop_and_step_macro(enable=True, step=False, slice=slice, stage=stage, npe_index=2, print_note=True)
>>>0
Slice[4].Stage['termination'].NPE[2] -> Enable Stop macro feature

>>>npu_sc.npe_stop_and_step_macro(enable=True, step=False, slice=slice, stage=stage, npe_index=2, print_note=True)
>>>1

### ping 
cisco@sonic7006:~$ ping -I Vrf203 20.0.0.100 -c 1  
ping: Warning: source address might be selected on device other than Vrf203.  
PING 20.0.0.100 (20.0.0.100) from 20.0.0.10 Vrf203: 56(84) bytes of data.  
  
--- 20.0.0.100 ping statistics ---  
1 packets transmitted, 0 received, 100% packet loss, time 0ms  

***this time, the ping failed, there is no packet received, and count of s4-out for NPE 0 is 0***  

>>> npu_sc.print_npe_counters_table()
>>>+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|          |s0-in|s0-out|s0-loop|s1-in|s1-out|s1-loop|s2-in|s2-out|s2-loop|s3-in|s3-out|s3-loop|s4-in|s4-out|s4-loop|s5-in|s5-out|s5-loop|
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| NPU-Host |  0  |  0   |   0   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-0|  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  1  |  **0**   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-1|  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-2|  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-0 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-1 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-2 |  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| Tx-NPE-0 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  1  |  1   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| Tx-NPE-1 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+

### print the macro stack, it shows no macros in NPE0  

>>> npu_sc.rxpp_term_last_npe_macros(4,0)
>>>#### NOTES: 1) Max stack depth is 4. Head of the macros stack is entry=0. 2) This register is cleared once read. Since last read, 4 valid macros were performed.
  NPE-macros-stack[entry=0]: macro_id 0x5, i.e. 'network_rx_mac_af_and_termination_macro'
  NPE-macros-stack[entry=1]: macro_id 0x3, i.e. 'network_rx_ip_af_and_termination_macro'
  NPE-macros-stack[entry=2]: macro_id 0x5, i.e. 'network_rx_mac_af_and_termination_macro'
  NPE-macros-stack[entry=3]: macro_id 0x3, i.e. 'network_rx_ip_af_and_termination_macro'

This result comprise all past stack, and we need a "clear" environment

### ping 
cisco@sonic7006:~$ ping -I Vrf203 20.0.0.100 -c 1  
ping: Warning: source address might be selected on device other than Vrf203.  
PING 20.0.0.100 (20.0.0.100) from 20.0.0.10 Vrf203: 56(84) bytes of data.  
  
--- 20.0.0.100 ping statistics ---  
1 packets transmitted, 0 received, 100% packet loss, time 0ms  
>>>
>>>npu_sc.print_npe_counters_table()
>>>+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|          |s0-in|s0-out|s0-loop|s1-in|s1-out|s1-loop|s2-in|s2-out|s2-loop|s3-in|s3-out|s3-loop|s4-in|s4-out|s4-loop|s5-in|s5-out|s5-loop|
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| NPU-Host |  0  |  0   |   0   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |  -  |  -   |   -   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-0|  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-1|  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Term-NPE-2|  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  1  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-0 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-1 |  1  |  1   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
|Fwd-NPE-2 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| Tx-NPE-0 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
| Tx-NPE-1 |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  0  |  0   |   0   |  1  |  1   |   0   |  0  |  0   |   0   |
+----------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+-----+------+-------+
>>>npu_sc.rxpp_term_last_npe_macros(4,2)
>>>#### NOTES: 1) Max stack depth is 4. Head of the macros stack is entry=0. 2) This register is cleared once read. Since last read, 2 valid macros were performed.
  NPE-macros-stack[entry=0]: macro_id 0x5, i.e. 'network_rx_mac_af_and_termination_macro'
  NPE-macros-stack[entry=1]: macro_id 0x5, i.e. 'network_rx_mac_af_and_termination_macro'



### enable the Macro again, and print the macro stack  

>>>npu_sc.npe_stop_and_step_macro(enable=True, step=True, slice=slice, stage=stage, npe_index=2, print_note=True)
>>>1
Slice[4].Stage['termination'].NPE[2] -> Stepping single macro  

>>>npu_sc.rxpp_term_last_npe_macros(4,2)
>>>#### NOTES: 1) Max stack depth is 4. Head of the macros stack is entry=0. 2) This register is cleared once read. Since last read, 1 valid macros were performed.
  NPE-macros-stack[entry=0]: macro_id 0x3, i.e. 'network_rx_ip_af_and_termination_macro'


>>>npu_sc.get_npe_lookups_and_results(stage="termination", slice=4, npe_index=2, print_note=True)
>>>|------------------------------------------------------------------------------------------------------------------------|
| Key Bucket |                   Key Type                    | Key Value | Result Bucket |  Result Type   | Result Value |
|========================================================================================================================|
|     d      | npl_ipv4_qos_tag_muxing_for_inner_header_ove  | 0x1fbc49  |       d       | npl_qos_tags_t |     0x0      |
|            | r_l3_table_key_option_protocol_type_unknown_t |           |               |                |              |
|------------------------------------------------------------------------------------------------------------------------|



For elaboration of keys/results:
     npu_sc.print_parsed_npe_key(<stage>, <slice>, <npe index>, <bucket a/b/c/d>)
     npu_sc.print_parsed_npe_result(<stage>, <slice>, <npe index>, <bucket a/b/c/d>)
Examples:
     npu_sc.print_parsed_npe_key("termination", 4, 2, "d")
     npu_sc.print_parsed_npe_result("termination", 4, 2, "d")

>>>npu_sc.print_parsed_npe_key("termination", 4, 2, "d")
>>>Key type: npl_ipv4_qos_tag_muxing_for_inner_header_over_l3_table_key_option_protocol_type_unknown_t, Value: 0x1fbc49
  const1_8d0_exact_0x0: 0x49
  const2_2b0_exact_0x0: 0x2
  const3_QOS_MAPPING_KEY_MSB_V4_exact_0x0: 0x0
  ipv4_dscp: 0x1f
  packet_ipv4_header_dscp: 0x3c

#### here we can search "ipv4_qos_tag_muxing_for_inner_header_over_l3_table" under the folder sdk/npl/

ip_control.npl:
control network_rx_ip_af_and_termination_control{
        if (packet.protocol_layer[next].type[3:0] == PROTOCOL_TYPE_IPV4[3:0]) {
      apply(ipv4_qos_tag_muxing_for_inner_header_over_l3_ipv4_table);
    } else if (packet.protocol_layer[next].type[3:0] == PROTOCOL_TYPE_IPV6[3:0]) {
      apply(ipv4_qos_tag_muxing_for_inner_header_over_l3_ipv6_table);
    } else {
      hardwired::assert(packet.protocol_layer[next].type == PROTOCOL_TYPE_MPLS ||
        packet.protocol_layer[next].type == PROTOCOL_TYPE_ETHERNET ||
        packet.protocol_layer[next].type == PROTOCOL_TYPE_ETHERNET_VLAN ||
        packet.protocol_layer[next].type == PROTOCOL_TYPE_GTP ||
#if(ARCHITECTURE == NP2)
        packet.protocol_layer[next].type == PROTOCOL_TYPE_ESP ||
#endif
        packet.protocol_layer[next].type == PROTOCOL_TYPE_UNKNOWN,
        "Unexpected header type");
      apply(ipv4_qos_tag_muxing_for_inner_header_over_l3_table);
    }

}
>>>npu_sc.print_parsed_npe_result("termination", 4, 2, "d")
>>>Result type: npl_qos_tags_t, Value: 0x0
  parsing inner:
    val: 0x0
  parsing mapping_key:
    val: 0x0
  parsing outer:
    val: 0x0

>>>npu_sc.print_parsed_npe_key("termination", 4, 2, "a")
>>>Key in bucket a is None
>>> npu_sc.print_parsed_npe_key("termination", 4, 2, "b")
>>>Key in bucket b is None
>>> npu_sc.print_parsed_npe_key("termination", 4, 2, "c")
>>>Key in bucket c is None


>>>npu_sc.get_npe_lookups_and_results(stage="forwarding", slice=4, npe_index=2, print_note=True)
>>>|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Key Bucket |               Key Type                |                 Key Value                  | Result Bucket |                Result Type                 |   Result Value   |
|=================================================================================================================================================================================|
|     a      | npl_ipv4_lpts_f0_compound_table_key_t | 0x80000040000080004124800800002a0a0000321c |       a       | npl_ipv4_lpts_f0_compound_table_payloads_t | 0x200010081681f4 |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|



For elaboration of keys/results:
     npu_sc.print_parsed_npe_key(<stage>, <slice>, <npe index>, <bucket a/b/c/d>)
     npu_sc.print_parsed_npe_result(<stage>, <slice>, <npe index>, <bucket a/b/c/d>)
Examples:
     npu_sc.print_parsed_npe_key("forwarding", 4, 2, "a")
     npu_sc.print_parsed_npe_result("forwarding", 4, 2, "a")

>>>
>>>npu_sc.print_parsed_npe_key("forwarding", 4, 2, "a")
>>>Key type: npl_ipv4_lpts_f0_compound_table_key_t, Value: 0x80000040000080004124800800002a0a0000321c
  const1_FWD_LPTS_TABLE_ID_IPV4_ternary_0xc: 0xc
  const2_TCAM_LPTS_CONST_TABLE_ID_IPV4_ternary_0x1: 0x1
  parsing get_field_by_name:
  ip_rx_local_vars_is_ipv4_first_fragment: 0x1
  packet_header_0__flags_and_offset_13_0_: 0x0
  parsing packet_header_1__l4_ports:
    dst_port: 0x8249
    src_port: 0x0
  packet_ipv4_header_protocol: 0x1
  packet_ipv4_header_sip: 0x14000064
  parsing pd_layer_vars_l3_l3_relay_id:
    id: 0x1
  pd_redirect_stage_vars_ip_length_13_0_: 0x54
  parsing pd_redirect_stage_vars_og_key:
    lpts_is_mc: 0x0
    parsing lpts_object_groups:
      parsing dest_code:
        id: 0x8000
      parsing src_code:
        id: 0x0
    lpts_og_app_id: 0x0
    parsing lpts_packet_flags:
      established: 0x0
      skip_bfd_or_ttl_enc: 0x0
  rx_redirect_local_vars_is_bgp_keepalive: 0x0

>>>npu_sc.print_parsed_npe_result("forwarding", 4, 2, "a")
>>>Result type: npl_ipv4_lpts_f0_compound_table_payloads_t, Value: 0x200010081681f4
  parsing lpts_first_lookup_result:
    parsing lpts_cntr_and_second_lookup_index:
      parsing lpts_counter_ptr:
        cb_id: 0x34
        cb_set_base: 0x1f4
        update_or_read: 0x0
      lpts_second_lookup_index: 0x1
      meter_index_lsb: 0x4
    parsing lpts_first_result_encap_data_msb:
      parsing encap_punt_code:
        parsing fabric_ibm_cmd:
          ibm_cmd: 0x0
          ibm_cmd_padding: 0x0
        lpts_reason: 0x0
        mirror_or_redirect_code: 0x0
      ingress_punt_src: 0x2
      parsing punt_sub_code:
        parsing sub_code:
          parsing lpts_flow_type:
            lpts_flow: 0x0
    parsing punt_encap_data_lsb:
      parsing extra:
        lpts_meter_index_msb: 0x0
      parsing punt_controls:
        mirror_local_encap_format: 0x0
        punt_format: 0x0
      parsing punt_nw_encap_ptr:
        ptr: 0x0
      punt_nw_encap_type: 0x1

#### here we search the code "ipv4_lpts_f0_compound_table" traversing the sdk/npl  
acl_control.npl:
control ipv4_lpts_f0_compound_db {
  apply(ipv4_lpts_f0_compound_table);
}

redirect_common.npl:
  //  if (ingress_lpts_local_data.packet_fwd_header_type == FWD_HEADER_TYPE_IPV4) {
  if (packet.header_info.type[3:0] == PROTOCOL_TYPE_IPV4[3:0]) {   // ipv4
    //if (ingress_lpts_local_data.central_tcam_lookup_interface == 1'b0) {
      apply(ip_ver_mc_static_table);
      CONTEXT_IF(context == aci) {
          aci_ipv4_lpts_f0_compound_db();
      } CONTEXT_ELSE { // network
          ipv4_lpts_f0_compound_db();
      }
    //} else {
    //  apply(ipv4_lpts_f1_compound_table);
    //}
    } else { // FWD_HEADER_TYPE_IPV6) {
    ipv6_lpts_compound_db();
  }
  ***apply(lpts_2nd_lookup_table);***
  ***lpts_process_lookup_result();***


#### from the redirect_common.npl, after lookup ipv4_lpts_f0_compound_table, lpts_process_lookup_result() will change pd.header with result:     
